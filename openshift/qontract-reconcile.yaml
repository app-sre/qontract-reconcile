---
# Source: qontract-reconcile/templates/template.yaml
apiVersion: v1
kind: Template
metadata:
  name: qontract-reconcile
objects:
- apiVersion: extensions/v1beta1
  kind: Deployment
  metadata:
    labels:
      app: qontract-reconcile
    name: qontract-reconcile-aws-garbage-collector
  spec:
    replicas: 1
    selector:
      matchLabels:
        app: qontract-reconcile
    template:
      metadata:
        labels:
          app: qontract-reconcile
      spec:
        securityContext:
          runAsUser: ${{USER_ID}}
        containers:
        - name: int
          image: ${IMAGE}:${IMAGE_TAG}
          env:
          - name: DRY_RUN
            value: ${DRY_RUN}
          - name: INTEGRATION_NAME
            value: aws-garbage-collector
          - name: INTEGRATION_EXTRA_ARGS
            value: ""
          - name: SLEEP_DURATION_SECS
            value: ${SLEEP_DURATION_SECS}
          resources:
            limits:
              cpu: ${QR_AWS_GARBAGE_COLLECTOR_CPU_LIMIT}
              memory: ${QR_AWS_GARBAGE_COLLECTOR_MEMORY_LIMIT}
            requests:
              cpu: ${QR_AWS_GARBAGE_COLLECTOR_CPU_REQUEST}
              memory: ${QR_AWS_GARBAGE_COLLECTOR_MEMORY_REQUEST}
          volumeMounts:
          - name: qontract-reconcile-toml
            mountPath: /config
        volumes:
        - name: qontract-reconcile-toml
          secret:
            secretName: qontract-reconcile-toml
- apiVersion: extensions/v1beta1
  kind: Deployment
  metadata:
    labels:
      app: qontract-reconcile
    name: qontract-reconcile-aws-iam-keys
  spec:
    replicas: 1
    selector:
      matchLabels:
        app: qontract-reconcile
    template:
      metadata:
        labels:
          app: qontract-reconcile
      spec:
        securityContext:
          runAsUser: ${{USER_ID}}
        containers:
        - name: int
          image: ${IMAGE}:${IMAGE_TAG}
          env:
          - name: DRY_RUN
            value: ${DRY_RUN}
          - name: INTEGRATION_NAME
            value: aws-iam-keys
          - name: INTEGRATION_EXTRA_ARGS
            value: ""
          - name: SLEEP_DURATION_SECS
            value: ${SLEEP_DURATION_SECS}
          resources:
            limits:
              cpu: ${QR_AWS_IAM_KEYS_CPU_LIMIT}
              memory: ${QR_AWS_IAM_KEYS_MEMORY_LIMIT}
            requests:
              cpu: ${QR_AWS_IAM_KEYS_CPU_REQUEST}
              memory: ${QR_AWS_IAM_KEYS_MEMORY_REQUEST}
          volumeMounts:
          - name: qontract-reconcile-toml
            mountPath: /config
        volumes:
        - name: qontract-reconcile-toml
          secret:
            secretName: qontract-reconcile-toml
- apiVersion: extensions/v1beta1
  kind: Deployment
  metadata:
    labels:
      app: qontract-reconcile
    name: qontract-reconcile-github
  spec:
    replicas: 1
    selector:
      matchLabels:
        app: qontract-reconcile
    template:
      metadata:
        labels:
          app: qontract-reconcile
      spec:
        securityContext:
          runAsUser: ${{USER_ID}}
        initContainers:
        - name: config
          image: quay.io/app-sre/busybox
          resources:
            requests:
              memory: 10Mi
              cpu: 15m
            limits:
              memory: 20Mi
              cpu: 25m
          env:
          - name: SLACK_WEBHOOK_URL
            valueFrom:
              secretKeyRef:
                key: slack.webhook_url
                name: app-interface
          - name: SLACK_CHANNEL
            value: ${SLACK_CHANNEL}
          - name: SLACK_ICON_EMOJI
            value: ${SLACK_ICON_EMOJI}
          command: ["/bin/sh", "-c"]
          args:
          - |
            # generate fluent.conf
            cat > /fluentd/etc/fluent.conf <<EOF
            <source>
              @type tail
              path /fluentd/log/integration.log
              pos_file /fluentd/log/integration.log.pos
              tag integration
              <parse>
                @type none
              </parse>
            </source>

            <filter integration>
              @type grep
              <exclude>
                key message
                pattern /HTTP Error 409: Conflict/
              </exclude>
            </filter>

            <match integration>
              @type slack
              webhook_url ${SLACK_WEBHOOK_URL}
              channel ${SLACK_CHANNEL}
              icon_emoji ${SLACK_ICON_EMOJI}
              username sd-app-sre-bot
              flush_interval 10s
              message "\`\`\`[github] %s\`\`\`"
            </match>
            EOF
          volumeMounts:
          - name: fluentd-config
            mountPath: /fluentd/etc/
        containers:
        - name: int
          image: ${IMAGE}:${IMAGE_TAG}
          env:
          - name: DRY_RUN
            value: ${DRY_RUN}
          - name: INTEGRATION_NAME
            value: github
          - name: INTEGRATION_EXTRA_ARGS
            value: ""
          - name: SLEEP_DURATION_SECS
            value: ${SLEEP_DURATION_SECS}
          - name: LOG_FILE
            value: "${LOG_FILE}"
          resources:
            limits:
              cpu: ${QR_GITHUB_CPU_LIMIT}
              memory: ${QR_GITHUB_MEMORY_LIMIT}
            requests:
              cpu: ${QR_GITHUB_CPU_REQUEST}
              memory: ${QR_GITHUB_MEMORY_REQUEST}
          volumeMounts:
          - name: qontract-reconcile-toml
            mountPath: /config
          - name: logs
            mountPath: /fluentd/log/
        - name: fluentd
          image: quay.io/app-sre/fluentd:latest
          resources:
            requests:
              memory: 30Mi
              cpu: 15m
            limits:
              memory: 60Mi
              cpu: 25m
          volumeMounts:
          - name: logs
            mountPath: /fluentd/log/
          - name: fluentd-config
            mountPath: /fluentd/etc/
        volumes:
        - name: qontract-reconcile-toml
          secret:
            secretName: qontract-reconcile-toml
        - name: logs
          emptyDir: {}
        - name: fluentd-config
          emptyDir: {}
- apiVersion: extensions/v1beta1
  kind: Deployment
  metadata:
    labels:
      app: qontract-reconcile
    name: qontract-reconcile-github-repo-invites
  spec:
    replicas: 1
    selector:
      matchLabels:
        app: qontract-reconcile
    template:
      metadata:
        labels:
          app: qontract-reconcile
      spec:
        securityContext:
          runAsUser: ${{USER_ID}}
        initContainers:
        - name: config
          image: quay.io/app-sre/busybox
          resources:
            requests:
              memory: 10Mi
              cpu: 15m
            limits:
              memory: 20Mi
              cpu: 25m
          env:
          - name: SLACK_WEBHOOK_URL
            valueFrom:
              secretKeyRef:
                key: slack.webhook_url
                name: app-interface
          - name: SLACK_CHANNEL
            value: ${SLACK_CHANNEL}
          - name: SLACK_ICON_EMOJI
            value: ${SLACK_ICON_EMOJI}
          command: ["/bin/sh", "-c"]
          args:
          - |
            # generate fluent.conf
            cat > /fluentd/etc/fluent.conf <<EOF
            <source>
              @type tail
              path /fluentd/log/integration.log
              pos_file /fluentd/log/integration.log.pos
              tag integration
              <parse>
                @type none
              </parse>
            </source>

            <filter integration>
              @type grep
              <exclude>
                key message
                pattern /HTTP Error 409: Conflict/
              </exclude>
            </filter>

            <match integration>
              @type slack
              webhook_url ${SLACK_WEBHOOK_URL}
              channel ${SLACK_CHANNEL}
              icon_emoji ${SLACK_ICON_EMOJI}
              username sd-app-sre-bot
              flush_interval 10s
              message "\`\`\`[github-repo-invites] %s\`\`\`"
            </match>
            EOF
          volumeMounts:
          - name: fluentd-config
            mountPath: /fluentd/etc/
        containers:
        - name: int
          image: ${IMAGE}:${IMAGE_TAG}
          env:
          - name: DRY_RUN
            value: ${DRY_RUN}
          - name: INTEGRATION_NAME
            value: github-repo-invites
          - name: INTEGRATION_EXTRA_ARGS
            value: ""
          - name: SLEEP_DURATION_SECS
            value: ${SLEEP_DURATION_SECS}
          - name: LOG_FILE
            value: "${LOG_FILE}"
          resources:
            limits:
              cpu: ${QR_GITHUB_REPO_INVITES_CPU_LIMIT}
              memory: ${QR_GITHUB_REPO_INVITES_MEMORY_LIMIT}
            requests:
              cpu: ${QR_GITHUB_REPO_INVITES_CPU_REQUEST}
              memory: ${QR_GITHUB_REPO_INVITES_MEMORY_REQUEST}
          volumeMounts:
          - name: qontract-reconcile-toml
            mountPath: /config
          - name: logs
            mountPath: /fluentd/log/
        - name: fluentd
          image: quay.io/app-sre/fluentd:latest
          resources:
            requests:
              memory: 30Mi
              cpu: 15m
            limits:
              memory: 60Mi
              cpu: 25m
          volumeMounts:
          - name: logs
            mountPath: /fluentd/log/
          - name: fluentd-config
            mountPath: /fluentd/etc/
        volumes:
        - name: qontract-reconcile-toml
          secret:
            secretName: qontract-reconcile-toml
        - name: logs
          emptyDir: {}
        - name: fluentd-config
          emptyDir: {}
- apiVersion: extensions/v1beta1
  kind: Deployment
  metadata:
    labels:
      app: qontract-reconcile
    name: qontract-reconcile-quay-membership
  spec:
    replicas: 1
    selector:
      matchLabels:
        app: qontract-reconcile
    template:
      metadata:
        labels:
          app: qontract-reconcile
      spec:
        securityContext:
          runAsUser: ${{USER_ID}}
        initContainers:
        - name: config
          image: quay.io/app-sre/busybox
          resources:
            requests:
              memory: 10Mi
              cpu: 15m
            limits:
              memory: 20Mi
              cpu: 25m
          env:
          - name: SLACK_WEBHOOK_URL
            valueFrom:
              secretKeyRef:
                key: slack.webhook_url
                name: app-interface
          - name: SLACK_CHANNEL
            value: ${SLACK_CHANNEL}
          - name: SLACK_ICON_EMOJI
            value: ${SLACK_ICON_EMOJI}
          command: ["/bin/sh", "-c"]
          args:
          - |
            # generate fluent.conf
            cat > /fluentd/etc/fluent.conf <<EOF
            <source>
              @type tail
              path /fluentd/log/integration.log
              pos_file /fluentd/log/integration.log.pos
              tag integration
              <parse>
                @type none
              </parse>
            </source>

            <filter integration>
              @type grep
              <exclude>
                key message
                pattern /HTTP Error 409: Conflict/
              </exclude>
            </filter>

            <match integration>
              @type slack
              webhook_url ${SLACK_WEBHOOK_URL}
              channel ${SLACK_CHANNEL}
              icon_emoji ${SLACK_ICON_EMOJI}
              username sd-app-sre-bot
              flush_interval 10s
              message "\`\`\`[quay-membership] %s\`\`\`"
            </match>
            EOF
          volumeMounts:
          - name: fluentd-config
            mountPath: /fluentd/etc/
        containers:
        - name: int
          image: ${IMAGE}:${IMAGE_TAG}
          env:
          - name: DRY_RUN
            value: ${DRY_RUN}
          - name: INTEGRATION_NAME
            value: quay-membership
          - name: INTEGRATION_EXTRA_ARGS
            value: ""
          - name: SLEEP_DURATION_SECS
            value: ${SLEEP_DURATION_SECS}
          - name: LOG_FILE
            value: "${LOG_FILE}"
          resources:
            limits:
              cpu: ${QR_QUAY_MEMBERSHIP_CPU_LIMIT}
              memory: ${QR_QUAY_MEMBERSHIP_MEMORY_LIMIT}
            requests:
              cpu: ${QR_QUAY_MEMBERSHIP_CPU_REQUEST}
              memory: ${QR_QUAY_MEMBERSHIP_MEMORY_REQUEST}
          volumeMounts:
          - name: qontract-reconcile-toml
            mountPath: /config
          - name: logs
            mountPath: /fluentd/log/
        - name: fluentd
          image: quay.io/app-sre/fluentd:latest
          resources:
            requests:
              memory: 30Mi
              cpu: 15m
            limits:
              memory: 60Mi
              cpu: 25m
          volumeMounts:
          - name: logs
            mountPath: /fluentd/log/
          - name: fluentd-config
            mountPath: /fluentd/etc/
        volumes:
        - name: qontract-reconcile-toml
          secret:
            secretName: qontract-reconcile-toml
        - name: logs
          emptyDir: {}
        - name: fluentd-config
          emptyDir: {}
- apiVersion: extensions/v1beta1
  kind: Deployment
  metadata:
    labels:
      app: qontract-reconcile
    name: qontract-reconcile-quay-mirror
  spec:
    replicas: 1
    selector:
      matchLabels:
        app: qontract-reconcile
    template:
      metadata:
        labels:
          app: qontract-reconcile
      spec:
        securityContext:
          runAsUser: ${{USER_ID}}
        initContainers:
        - name: config
          image: quay.io/app-sre/busybox
          resources:
            requests:
              memory: 10Mi
              cpu: 15m
            limits:
              memory: 20Mi
              cpu: 25m
          env:
          - name: SLACK_WEBHOOK_URL
            valueFrom:
              secretKeyRef:
                key: slack.webhook_url
                name: app-interface
          - name: SLACK_CHANNEL
            value: ${SLACK_CHANNEL}
          - name: SLACK_ICON_EMOJI
            value: ${SLACK_ICON_EMOJI}
          command: ["/bin/sh", "-c"]
          args:
          - |
            # generate fluent.conf
            cat > /fluentd/etc/fluent.conf <<EOF
            <source>
              @type tail
              path /fluentd/log/integration.log
              pos_file /fluentd/log/integration.log.pos
              tag integration
              <parse>
                @type none
              </parse>
            </source>

            <filter integration>
              @type grep
              <exclude>
                key message
                pattern /HTTP Error 409: Conflict/
              </exclude>
            </filter>

            <match integration>
              @type slack
              webhook_url ${SLACK_WEBHOOK_URL}
              channel ${SLACK_CHANNEL}
              icon_emoji ${SLACK_ICON_EMOJI}
              username sd-app-sre-bot
              flush_interval 10s
              message "\`\`\`[quay-mirror] %s\`\`\`"
            </match>
            EOF
          volumeMounts:
          - name: fluentd-config
            mountPath: /fluentd/etc/
        containers:
        - name: int
          image: ${IMAGE}:${IMAGE_TAG}
          env:
          - name: DRY_RUN
            value: ${DRY_RUN}
          - name: INTEGRATION_NAME
            value: quay-mirror
          - name: INTEGRATION_EXTRA_ARGS
            value: ""
          - name: SLEEP_DURATION_SECS
            value: ${SLEEP_DURATION_SECS}
          - name: LOG_FILE
            value: "${LOG_FILE}"
          resources:
            limits:
              cpu: ${QR_QUAY_MIRROR_CPU_LIMIT}
              memory: ${QR_QUAY_MIRROR_MEMORY_LIMIT}
            requests:
              cpu: ${QR_QUAY_MIRROR_CPU_REQUEST}
              memory: ${QR_QUAY_MIRROR_MEMORY_REQUEST}
          volumeMounts:
          - name: qontract-reconcile-toml
            mountPath: /config
          - name: logs
            mountPath: /fluentd/log/
        - name: fluentd
          image: quay.io/app-sre/fluentd:latest
          resources:
            requests:
              memory: 30Mi
              cpu: 15m
            limits:
              memory: 60Mi
              cpu: 25m
          volumeMounts:
          - name: logs
            mountPath: /fluentd/log/
          - name: fluentd-config
            mountPath: /fluentd/etc/
        volumes:
        - name: qontract-reconcile-toml
          secret:
            secretName: qontract-reconcile-toml
        - name: logs
          emptyDir: {}
        - name: fluentd-config
          emptyDir: {}
- apiVersion: extensions/v1beta1
  kind: Deployment
  metadata:
    labels:
      app: qontract-reconcile
    name: qontract-reconcile-quay-repos
  spec:
    replicas: 1
    selector:
      matchLabels:
        app: qontract-reconcile
    template:
      metadata:
        labels:
          app: qontract-reconcile
      spec:
        securityContext:
          runAsUser: ${{USER_ID}}
        initContainers:
        - name: config
          image: quay.io/app-sre/busybox
          resources:
            requests:
              memory: 10Mi
              cpu: 15m
            limits:
              memory: 20Mi
              cpu: 25m
          env:
          - name: SLACK_WEBHOOK_URL
            valueFrom:
              secretKeyRef:
                key: slack.webhook_url
                name: app-interface
          - name: SLACK_CHANNEL
            value: ${SLACK_CHANNEL}
          - name: SLACK_ICON_EMOJI
            value: ${SLACK_ICON_EMOJI}
          command: ["/bin/sh", "-c"]
          args:
          - |
            # generate fluent.conf
            cat > /fluentd/etc/fluent.conf <<EOF
            <source>
              @type tail
              path /fluentd/log/integration.log
              pos_file /fluentd/log/integration.log.pos
              tag integration
              <parse>
                @type none
              </parse>
            </source>

            <filter integration>
              @type grep
              <exclude>
                key message
                pattern /HTTP Error 409: Conflict/
              </exclude>
            </filter>

            <match integration>
              @type slack
              webhook_url ${SLACK_WEBHOOK_URL}
              channel ${SLACK_CHANNEL}
              icon_emoji ${SLACK_ICON_EMOJI}
              username sd-app-sre-bot
              flush_interval 10s
              message "\`\`\`[quay-repos] %s\`\`\`"
            </match>
            EOF
          volumeMounts:
          - name: fluentd-config
            mountPath: /fluentd/etc/
        containers:
        - name: int
          image: ${IMAGE}:${IMAGE_TAG}
          env:
          - name: DRY_RUN
            value: ${DRY_RUN}
          - name: INTEGRATION_NAME
            value: quay-repos
          - name: INTEGRATION_EXTRA_ARGS
            value: ""
          - name: SLEEP_DURATION_SECS
            value: ${SLEEP_DURATION_SECS}
          - name: LOG_FILE
            value: "${LOG_FILE}"
          resources:
            limits:
              cpu: ${QR_QUAY_REPOS_CPU_LIMIT}
              memory: ${QR_QUAY_REPOS_MEMORY_LIMIT}
            requests:
              cpu: ${QR_QUAY_REPOS_CPU_REQUEST}
              memory: ${QR_QUAY_REPOS_MEMORY_REQUEST}
          volumeMounts:
          - name: qontract-reconcile-toml
            mountPath: /config
          - name: logs
            mountPath: /fluentd/log/
        - name: fluentd
          image: quay.io/app-sre/fluentd:latest
          resources:
            requests:
              memory: 30Mi
              cpu: 15m
            limits:
              memory: 60Mi
              cpu: 25m
          volumeMounts:
          - name: logs
            mountPath: /fluentd/log/
          - name: fluentd-config
            mountPath: /fluentd/etc/
        volumes:
        - name: qontract-reconcile-toml
          secret:
            secretName: qontract-reconcile-toml
        - name: logs
          emptyDir: {}
        - name: fluentd-config
          emptyDir: {}
- apiVersion: extensions/v1beta1
  kind: Deployment
  metadata:
    labels:
      app: qontract-reconcile
    name: qontract-reconcile-github-scanner
  spec:
    replicas: 1
    selector:
      matchLabels:
        app: qontract-reconcile
    template:
      metadata:
        labels:
          app: qontract-reconcile
      spec:
        securityContext:
          runAsUser: ${{USER_ID}}
        containers:
        - name: int
          image: ${IMAGE}:${IMAGE_TAG}
          env:
          - name: DRY_RUN
            value: ${DRY_RUN}
          - name: INTEGRATION_NAME
            value: github-scanner
          - name: INTEGRATION_EXTRA_ARGS
            value: "--thread-pool-size 1"
          - name: SLEEP_DURATION_SECS
            value: ${SLEEP_DURATION_SECS}
          - name: gitlab_pr_submitter_queue_url
            valueFrom:
              secretKeyRef:
                name: ${APP_INTERFACE_SQS_SECRET_NAME}
                key: gitlab_pr_submitter_queue_url
          resources:
            limits:
              cpu: ${QR_GITHUB_SCANNER_CPU_LIMIT}
              memory: ${QR_GITHUB_SCANNER_MEMORY_LIMIT}
            requests:
              cpu: ${QR_GITHUB_SCANNER_CPU_REQUEST}
              memory: ${QR_GITHUB_SCANNER_MEMORY_REQUEST}
          volumeMounts:
          - name: qontract-reconcile-toml
            mountPath: /config
        volumes:
        - name: qontract-reconcile-toml
          secret:
            secretName: qontract-reconcile-toml
- apiVersion: extensions/v1beta1
  kind: Deployment
  metadata:
    labels:
      app: qontract-reconcile
    name: qontract-reconcile-aws-support-cases-sos
  spec:
    replicas: 1
    selector:
      matchLabels:
        app: qontract-reconcile
    template:
      metadata:
        labels:
          app: qontract-reconcile
      spec:
        securityContext:
          runAsUser: ${{USER_ID}}
        containers:
        - name: int
          image: ${IMAGE}:${IMAGE_TAG}
          env:
          - name: DRY_RUN
            value: ${DRY_RUN}
          - name: INTEGRATION_NAME
            value: aws-support-cases-sos
          - name: INTEGRATION_EXTRA_ARGS
            value: ""
          - name: SLEEP_DURATION_SECS
            value: ${SLEEP_DURATION_SECS}
          - name: gitlab_pr_submitter_queue_url
            valueFrom:
              secretKeyRef:
                name: ${APP_INTERFACE_SQS_SECRET_NAME}
                key: gitlab_pr_submitter_queue_url
          resources:
            limits:
              cpu: ${QR_AWS_SUPPORT_CASE_SOS_CPU_LIMIT}
              memory: ${QR_AWS_SUPPORT_CASE_SOS_MEMORY_LIMIT}
            requests:
              cpu: ${QR_AWS_SUPPORT_CASE_SOS_CPU_REQUEST}
              memory: ${QR_AWS_SUPPORT_CASE_SOS_MEMORY_REQUEST}
          volumeMounts:
          - name: qontract-reconcile-toml
            mountPath: /config
        volumes:
        - name: qontract-reconcile-toml
          secret:
            secretName: qontract-reconcile-toml
- apiVersion: extensions/v1beta1
  kind: Deployment
  metadata:
    labels:
      app: qontract-reconcile
    name: qontract-reconcile-openshift-users
  spec:
    replicas: 1
    selector:
      matchLabels:
        app: qontract-reconcile
    template:
      metadata:
        labels:
          app: qontract-reconcile
      spec:
        securityContext:
          runAsUser: ${{USER_ID}}
        initContainers:
        - name: config
          image: quay.io/app-sre/busybox
          resources:
            requests:
              memory: 10Mi
              cpu: 15m
            limits:
              memory: 20Mi
              cpu: 25m
          env:
          - name: SLACK_WEBHOOK_URL
            valueFrom:
              secretKeyRef:
                key: slack.webhook_url
                name: app-interface
          - name: SLACK_CHANNEL
            value: ${SLACK_CHANNEL}
          - name: SLACK_ICON_EMOJI
            value: ${SLACK_ICON_EMOJI}
          command: ["/bin/sh", "-c"]
          args:
          - |
            # generate fluent.conf
            cat > /fluentd/etc/fluent.conf <<EOF
            <source>
              @type tail
              path /fluentd/log/integration.log
              pos_file /fluentd/log/integration.log.pos
              tag integration
              <parse>
                @type none
              </parse>
            </source>

            <filter integration>
              @type grep
              <exclude>
                key message
                pattern /HTTP Error 409: Conflict/
              </exclude>
            </filter>

            <match integration>
              @type slack
              webhook_url ${SLACK_WEBHOOK_URL}
              channel ${SLACK_CHANNEL}
              icon_emoji ${SLACK_ICON_EMOJI}
              username sd-app-sre-bot
              flush_interval 10s
              message "\`\`\`[openshift-users] %s\`\`\`"
            </match>
            EOF
          volumeMounts:
          - name: fluentd-config
            mountPath: /fluentd/etc/
        containers:
        - name: int
          image: ${IMAGE}:${IMAGE_TAG}
          env:
          - name: DRY_RUN
            value: ${DRY_RUN}
          - name: INTEGRATION_NAME
            value: openshift-users
          - name: INTEGRATION_EXTRA_ARGS
            value: ""
          - name: SLEEP_DURATION_SECS
            value: ${SLEEP_DURATION_SECS}
          - name: LOG_FILE
            value: "${LOG_FILE}"
          resources:
            limits:
              cpu: ${QR_OPENSHIFT_USERS_CPU_LIMIT}
              memory: ${QR_OPENSHIFT_USERS_MEMORY_LIMIT}
            requests:
              cpu: ${QR_OPENSHIFT_USERS_CPU_REQUEST}
              memory: ${QR_OPENSHIFT_USERS_MEMORY_REQUEST}
          volumeMounts:
          - name: qontract-reconcile-toml
            mountPath: /config
          - name: logs
            mountPath: /fluentd/log/
        - name: fluentd
          image: quay.io/app-sre/fluentd:latest
          resources:
            requests:
              memory: 30Mi
              cpu: 15m
            limits:
              memory: 60Mi
              cpu: 25m
          volumeMounts:
          - name: logs
            mountPath: /fluentd/log/
          - name: fluentd-config
            mountPath: /fluentd/etc/
        volumes:
        - name: qontract-reconcile-toml
          secret:
            secretName: qontract-reconcile-toml
        - name: logs
          emptyDir: {}
        - name: fluentd-config
          emptyDir: {}
- apiVersion: extensions/v1beta1
  kind: Deployment
  metadata:
    labels:
      app: qontract-reconcile
    name: qontract-reconcile-openshift-groups
  spec:
    replicas: 1
    selector:
      matchLabels:
        app: qontract-reconcile
    template:
      metadata:
        labels:
          app: qontract-reconcile
      spec:
        securityContext:
          runAsUser: ${{USER_ID}}
        initContainers:
        - name: config
          image: quay.io/app-sre/busybox
          resources:
            requests:
              memory: 10Mi
              cpu: 15m
            limits:
              memory: 20Mi
              cpu: 25m
          env:
          - name: SLACK_WEBHOOK_URL
            valueFrom:
              secretKeyRef:
                key: slack.webhook_url
                name: app-interface
          - name: SLACK_CHANNEL
            value: ${SLACK_CHANNEL}
          - name: SLACK_ICON_EMOJI
            value: ${SLACK_ICON_EMOJI}
          command: ["/bin/sh", "-c"]
          args:
          - |
            # generate fluent.conf
            cat > /fluentd/etc/fluent.conf <<EOF
            <source>
              @type tail
              path /fluentd/log/integration.log
              pos_file /fluentd/log/integration.log.pos
              tag integration
              <parse>
                @type none
              </parse>
            </source>

            <filter integration>
              @type grep
              <exclude>
                key message
                pattern /HTTP Error 409: Conflict/
              </exclude>
            </filter>

            <match integration>
              @type slack
              webhook_url ${SLACK_WEBHOOK_URL}
              channel ${SLACK_CHANNEL}
              icon_emoji ${SLACK_ICON_EMOJI}
              username sd-app-sre-bot
              flush_interval 10s
              message "\`\`\`[openshift-groups] %s\`\`\`"
            </match>
            EOF
          volumeMounts:
          - name: fluentd-config
            mountPath: /fluentd/etc/
        containers:
        - name: int
          image: ${IMAGE}:${IMAGE_TAG}
          env:
          - name: DRY_RUN
            value: ${DRY_RUN}
          - name: INTEGRATION_NAME
            value: openshift-groups
          - name: INTEGRATION_EXTRA_ARGS
            value: ""
          - name: SLEEP_DURATION_SECS
            value: ${SLEEP_DURATION_SECS}
          - name: LOG_FILE
            value: "${LOG_FILE}"
          resources:
            limits:
              cpu: ${QR_OPENSHIFT_GROUPS_CPU_LIMIT}
              memory: ${QR_OPENSHIFT_GROUPS_MEMORY_LIMIT}
            requests:
              cpu: ${QR_OPENSHIFT_GROUPS_CPU_REQUEST}
              memory: ${QR_OPENSHIFT_GROUPS_MEMORY_REQUEST}
          volumeMounts:
          - name: qontract-reconcile-toml
            mountPath: /config
          - name: logs
            mountPath: /fluentd/log/
        - name: fluentd
          image: quay.io/app-sre/fluentd:latest
          resources:
            requests:
              memory: 30Mi
              cpu: 15m
            limits:
              memory: 60Mi
              cpu: 25m
          volumeMounts:
          - name: logs
            mountPath: /fluentd/log/
          - name: fluentd-config
            mountPath: /fluentd/etc/
        volumes:
        - name: qontract-reconcile-toml
          secret:
            secretName: qontract-reconcile-toml
        - name: logs
          emptyDir: {}
        - name: fluentd-config
          emptyDir: {}
- apiVersion: extensions/v1beta1
  kind: Deployment
  metadata:
    labels:
      app: qontract-reconcile
    name: qontract-reconcile-openshift-namespaces
  spec:
    replicas: 1
    selector:
      matchLabels:
        app: qontract-reconcile
    template:
      metadata:
        labels:
          app: qontract-reconcile
      spec:
        securityContext:
          runAsUser: ${{USER_ID}}
        containers:
        - name: int
          image: ${IMAGE}:${IMAGE_TAG}
          env:
          - name: DRY_RUN
            value: ${DRY_RUN}
          - name: INTEGRATION_NAME
            value: openshift-namespaces
          - name: INTEGRATION_EXTRA_ARGS
            value: "--external"
          - name: SLEEP_DURATION_SECS
            value: ${SLEEP_DURATION_SECS}
          resources:
            limits:
              cpu: ${QR_OPENSHIFT_NAMESPACES_CPU_LIMIT}
              memory: ${QR_OPENSHIFT_NAMESPACES_MEMORY_LIMIT}
            requests:
              cpu: ${QR_OPENSHIFT_NAMESPACES_CPU_REQUEST}
              memory: ${QR_OPENSHIFT_NAMESPACES_MEMORY_REQUEST}
          volumeMounts:
          - name: qontract-reconcile-toml
            mountPath: /config
        volumes:
        - name: qontract-reconcile-toml
          secret:
            secretName: qontract-reconcile-toml
- apiVersion: extensions/v1beta1
  kind: Deployment
  metadata:
    labels:
      app: qontract-reconcile
    name: qontract-reconcile-openshift-clusterrolebindings
  spec:
    replicas: 1
    selector:
      matchLabels:
        app: qontract-reconcile
    template:
      metadata:
        labels:
          app: qontract-reconcile
      spec:
        securityContext:
          runAsUser: ${{USER_ID}}
        initContainers:
        - name: config
          image: quay.io/app-sre/busybox
          resources:
            requests:
              memory: 10Mi
              cpu: 15m
            limits:
              memory: 20Mi
              cpu: 25m
          env:
          - name: SLACK_WEBHOOK_URL
            valueFrom:
              secretKeyRef:
                key: slack.webhook_url
                name: app-interface
          - name: SLACK_CHANNEL
            value: ${SLACK_CHANNEL}
          - name: SLACK_ICON_EMOJI
            value: ${SLACK_ICON_EMOJI}
          command: ["/bin/sh", "-c"]
          args:
          - |
            # generate fluent.conf
            cat > /fluentd/etc/fluent.conf <<EOF
            <source>
              @type tail
              path /fluentd/log/integration.log
              pos_file /fluentd/log/integration.log.pos
              tag integration
              <parse>
                @type none
              </parse>
            </source>

            <filter integration>
              @type grep
              <exclude>
                key message
                pattern /HTTP Error 409: Conflict/
              </exclude>
            </filter>

            <match integration>
              @type slack
              webhook_url ${SLACK_WEBHOOK_URL}
              channel ${SLACK_CHANNEL}
              icon_emoji ${SLACK_ICON_EMOJI}
              username sd-app-sre-bot
              flush_interval 10s
              message "\`\`\`[openshift-clusterrolebindings] %s\`\`\`"
            </match>
            EOF
          volumeMounts:
          - name: fluentd-config
            mountPath: /fluentd/etc/
        containers:
        - name: int
          image: ${IMAGE}:${IMAGE_TAG}
          env:
          - name: DRY_RUN
            value: ${DRY_RUN}
          - name: INTEGRATION_NAME
            value: openshift-clusterrolebindings
          - name: INTEGRATION_EXTRA_ARGS
            value: ""
          - name: SLEEP_DURATION_SECS
            value: ${SLEEP_DURATION_SECS}
          - name: LOG_FILE
            value: "${LOG_FILE}"
          resources:
            limits:
              cpu: ${QR_OPENSHIFT_CLUSTERROLEBINDINGS_CPU_LIMIT}
              memory: ${QR_OPENSHIFT_CLUSTERROLEBINDINGS_MEMORY_LIMIT}
            requests:
              cpu: ${QR_OPENSHIFT_CLUSTERROLEBINDINGS_CPU_REQUEST}
              memory: ${QR_OPENSHIFT_CLUSTERROLEBINDINGS_MEMORY_REQUEST}
          volumeMounts:
          - name: qontract-reconcile-toml
            mountPath: /config
          - name: logs
            mountPath: /fluentd/log/
        - name: fluentd
          image: quay.io/app-sre/fluentd:latest
          resources:
            requests:
              memory: 30Mi
              cpu: 15m
            limits:
              memory: 60Mi
              cpu: 25m
          volumeMounts:
          - name: logs
            mountPath: /fluentd/log/
          - name: fluentd-config
            mountPath: /fluentd/etc/
        volumes:
        - name: qontract-reconcile-toml
          secret:
            secretName: qontract-reconcile-toml
        - name: logs
          emptyDir: {}
        - name: fluentd-config
          emptyDir: {}
- apiVersion: extensions/v1beta1
  kind: Deployment
  metadata:
    labels:
      app: qontract-reconcile
    name: qontract-reconcile-openshift-rolebindings
  spec:
    replicas: 1
    selector:
      matchLabels:
        app: qontract-reconcile
    template:
      metadata:
        labels:
          app: qontract-reconcile
      spec:
        securityContext:
          runAsUser: ${{USER_ID}}
        initContainers:
        - name: config
          image: quay.io/app-sre/busybox
          resources:
            requests:
              memory: 10Mi
              cpu: 15m
            limits:
              memory: 20Mi
              cpu: 25m
          env:
          - name: SLACK_WEBHOOK_URL
            valueFrom:
              secretKeyRef:
                key: slack.webhook_url
                name: app-interface
          - name: SLACK_CHANNEL
            value: ${SLACK_CHANNEL}
          - name: SLACK_ICON_EMOJI
            value: ${SLACK_ICON_EMOJI}
          command: ["/bin/sh", "-c"]
          args:
          - |
            # generate fluent.conf
            cat > /fluentd/etc/fluent.conf <<EOF
            <source>
              @type tail
              path /fluentd/log/integration.log
              pos_file /fluentd/log/integration.log.pos
              tag integration
              <parse>
                @type none
              </parse>
            </source>

            <filter integration>
              @type grep
              <exclude>
                key message
                pattern /HTTP Error 409: Conflict/
              </exclude>
            </filter>

            <match integration>
              @type slack
              webhook_url ${SLACK_WEBHOOK_URL}
              channel ${SLACK_CHANNEL}
              icon_emoji ${SLACK_ICON_EMOJI}
              username sd-app-sre-bot
              flush_interval 10s
              message "\`\`\`[openshift-rolebindings] %s\`\`\`"
            </match>
            EOF
          volumeMounts:
          - name: fluentd-config
            mountPath: /fluentd/etc/
        containers:
        - name: int
          image: ${IMAGE}:${IMAGE_TAG}
          env:
          - name: DRY_RUN
            value: ${DRY_RUN}
          - name: INTEGRATION_NAME
            value: openshift-rolebindings
          - name: INTEGRATION_EXTRA_ARGS
            value: ""
          - name: SLEEP_DURATION_SECS
            value: ${SLEEP_DURATION_SECS}
          - name: LOG_FILE
            value: "${LOG_FILE}"
          resources:
            limits:
              cpu: ${QR_OPENSHIFT_ROLEBINDINGS_CPU_LIMIT}
              memory: ${QR_OPENSHIFT_ROLEBINDINGS_MEMORY_LIMIT}
            requests:
              cpu: ${QR_OPENSHIFT_ROLEBINDINGS_CPU_REQUEST}
              memory: ${QR_OPENSHIFT_ROLEBINDINGS_MEMORY_REQUEST}
          volumeMounts:
          - name: qontract-reconcile-toml
            mountPath: /config
          - name: logs
            mountPath: /fluentd/log/
        - name: fluentd
          image: quay.io/app-sre/fluentd:latest
          resources:
            requests:
              memory: 30Mi
              cpu: 15m
            limits:
              memory: 60Mi
              cpu: 25m
          volumeMounts:
          - name: logs
            mountPath: /fluentd/log/
          - name: fluentd-config
            mountPath: /fluentd/etc/
        volumes:
        - name: qontract-reconcile-toml
          secret:
            secretName: qontract-reconcile-toml
        - name: logs
          emptyDir: {}
        - name: fluentd-config
          emptyDir: {}
- apiVersion: extensions/v1beta1
  kind: Deployment
  metadata:
    labels:
      app: qontract-reconcile
    name: qontract-reconcile-openshift-network-policies
  spec:
    replicas: 1
    selector:
      matchLabels:
        app: qontract-reconcile
    template:
      metadata:
        labels:
          app: qontract-reconcile
      spec:
        securityContext:
          runAsUser: ${{USER_ID}}
        initContainers:
        - name: config
          image: quay.io/app-sre/busybox
          resources:
            requests:
              memory: 10Mi
              cpu: 15m
            limits:
              memory: 20Mi
              cpu: 25m
          env:
          - name: SLACK_WEBHOOK_URL
            valueFrom:
              secretKeyRef:
                key: slack.webhook_url
                name: app-interface
          - name: SLACK_CHANNEL
            value: ${SLACK_CHANNEL}
          - name: SLACK_ICON_EMOJI
            value: ${SLACK_ICON_EMOJI}
          command: ["/bin/sh", "-c"]
          args:
          - |
            # generate fluent.conf
            cat > /fluentd/etc/fluent.conf <<EOF
            <source>
              @type tail
              path /fluentd/log/integration.log
              pos_file /fluentd/log/integration.log.pos
              tag integration
              <parse>
                @type none
              </parse>
            </source>

            <filter integration>
              @type grep
              <exclude>
                key message
                pattern /HTTP Error 409: Conflict/
              </exclude>
            </filter>

            <match integration>
              @type slack
              webhook_url ${SLACK_WEBHOOK_URL}
              channel ${SLACK_CHANNEL}
              icon_emoji ${SLACK_ICON_EMOJI}
              username sd-app-sre-bot
              flush_interval 10s
              message "\`\`\`[openshift-network-policies] %s\`\`\`"
            </match>
            EOF
          volumeMounts:
          - name: fluentd-config
            mountPath: /fluentd/etc/
        containers:
        - name: int
          image: ${IMAGE}:${IMAGE_TAG}
          env:
          - name: DRY_RUN
            value: ${DRY_RUN}
          - name: INTEGRATION_NAME
            value: openshift-network-policies
          - name: INTEGRATION_EXTRA_ARGS
            value: ""
          - name: SLEEP_DURATION_SECS
            value: ${SLEEP_DURATION_SECS}
          - name: LOG_FILE
            value: "${LOG_FILE}"
          resources:
            limits:
              cpu: ${QR_OPENSHIFT_NETWORK_POLICIES_CPU_LIMIT}
              memory: ${QR_OPENSHIFT_NETWORK_POLICIES_MEMORY_LIMIT}
            requests:
              cpu: ${QR_OPENSHIFT_NETWORK_POLICIES_CPU_REQUEST}
              memory: ${QR_OPENSHIFT_NETWORK_POLICIES_MEMORY_REQUEST}
          volumeMounts:
          - name: qontract-reconcile-toml
            mountPath: /config
          - name: logs
            mountPath: /fluentd/log/
        - name: fluentd
          image: quay.io/app-sre/fluentd:latest
          resources:
            requests:
              memory: 30Mi
              cpu: 15m
            limits:
              memory: 60Mi
              cpu: 25m
          volumeMounts:
          - name: logs
            mountPath: /fluentd/log/
          - name: fluentd-config
            mountPath: /fluentd/etc/
        volumes:
        - name: qontract-reconcile-toml
          secret:
            secretName: qontract-reconcile-toml
        - name: logs
          emptyDir: {}
        - name: fluentd-config
          emptyDir: {}
- apiVersion: extensions/v1beta1
  kind: Deployment
  metadata:
    labels:
      app: qontract-reconcile
    name: qontract-reconcile-openshift-acme
  spec:
    replicas: 1
    selector:
      matchLabels:
        app: qontract-reconcile
    template:
      metadata:
        labels:
          app: qontract-reconcile
      spec:
        securityContext:
          runAsUser: ${{USER_ID}}
        initContainers:
        - name: config
          image: quay.io/app-sre/busybox
          resources:
            requests:
              memory: 10Mi
              cpu: 15m
            limits:
              memory: 20Mi
              cpu: 25m
          env:
          - name: SLACK_WEBHOOK_URL
            valueFrom:
              secretKeyRef:
                key: slack.webhook_url
                name: app-interface
          - name: SLACK_CHANNEL
            value: ${SLACK_CHANNEL}
          - name: SLACK_ICON_EMOJI
            value: ${SLACK_ICON_EMOJI}
          command: ["/bin/sh", "-c"]
          args:
          - |
            # generate fluent.conf
            cat > /fluentd/etc/fluent.conf <<EOF
            <source>
              @type tail
              path /fluentd/log/integration.log
              pos_file /fluentd/log/integration.log.pos
              tag integration
              <parse>
                @type none
              </parse>
            </source>

            <filter integration>
              @type grep
              <exclude>
                key message
                pattern /HTTP Error 409: Conflict/
              </exclude>
            </filter>

            <match integration>
              @type slack
              webhook_url ${SLACK_WEBHOOK_URL}
              channel ${SLACK_CHANNEL}
              icon_emoji ${SLACK_ICON_EMOJI}
              username sd-app-sre-bot
              flush_interval 10s
              message "\`\`\`[openshift-acme] %s\`\`\`"
            </match>
            EOF
          volumeMounts:
          - name: fluentd-config
            mountPath: /fluentd/etc/
        containers:
        - name: int
          image: ${IMAGE}:${IMAGE_TAG}
          env:
          - name: DRY_RUN
            value: ${DRY_RUN}
          - name: INTEGRATION_NAME
            value: openshift-acme
          - name: INTEGRATION_EXTRA_ARGS
            value: ""
          - name: SLEEP_DURATION_SECS
            value: ${SLEEP_DURATION_SECS}
          - name: LOG_FILE
            value: "${LOG_FILE}"
          resources:
            limits:
              cpu: ${QR_OPENSHIFT_ACME_CPU_LIMIT}
              memory: ${QR_OPENSHIFT_ACME_MEMORY_LIMIT}
            requests:
              cpu: ${QR_OPENSHIFT_ACME_CPU_REQUEST}
              memory: ${QR_OPENSHIFT_ACME_MEMORY_REQUEST}
          volumeMounts:
          - name: qontract-reconcile-toml
            mountPath: /config
          - name: logs
            mountPath: /fluentd/log/
        - name: fluentd
          image: quay.io/app-sre/fluentd:latest
          resources:
            requests:
              memory: 30Mi
              cpu: 15m
            limits:
              memory: 60Mi
              cpu: 25m
          volumeMounts:
          - name: logs
            mountPath: /fluentd/log/
          - name: fluentd-config
            mountPath: /fluentd/etc/
        volumes:
        - name: qontract-reconcile-toml
          secret:
            secretName: qontract-reconcile-toml
        - name: logs
          emptyDir: {}
        - name: fluentd-config
          emptyDir: {}
- apiVersion: extensions/v1beta1
  kind: Deployment
  metadata:
    labels:
      app: qontract-reconcile
    name: qontract-reconcile-openshift-limitranges
  spec:
    replicas: 1
    selector:
      matchLabels:
        app: qontract-reconcile
    template:
      metadata:
        labels:
          app: qontract-reconcile
      spec:
        securityContext:
          runAsUser: ${{USER_ID}}
        containers:
        - name: int
          image: ${IMAGE}:${IMAGE_TAG}
          env:
          - name: DRY_RUN
            value: ${DRY_RUN}
          - name: INTEGRATION_NAME
            value: openshift-limitranges
          - name: INTEGRATION_EXTRA_ARGS
            value: ""
          - name: SLEEP_DURATION_SECS
            value: ${SLEEP_DURATION_SECS}
          resources:
            limits:
              cpu: ${QR_OPENSHIFT_LIMITRANGES_CPU_LIMIT}
              memory: ${QR_OPENSHIFT_LIMITRANGES_MEMORY_LIMIT}
            requests:
              cpu: ${QR_OPENSHIFT_LIMITRANGES_CPU_REQUEST}
              memory: ${QR_OPENSHIFT_LIMITRANGES_MEMORY_REQUEST}
          volumeMounts:
          - name: qontract-reconcile-toml
            mountPath: /config
        volumes:
        - name: qontract-reconcile-toml
          secret:
            secretName: qontract-reconcile-toml
- apiVersion: extensions/v1beta1
  kind: Deployment
  metadata:
    labels:
      app: qontract-reconcile
    name: qontract-reconcile-openshift-resources
  spec:
    replicas: 1
    selector:
      matchLabels:
        app: qontract-reconcile
    template:
      metadata:
        labels:
          app: qontract-reconcile
      spec:
        securityContext:
          runAsUser: ${{USER_ID}}
        initContainers:
        - name: config
          image: quay.io/app-sre/busybox
          resources:
            requests:
              memory: 10Mi
              cpu: 15m
            limits:
              memory: 20Mi
              cpu: 25m
          env:
          - name: SLACK_WEBHOOK_URL
            valueFrom:
              secretKeyRef:
                key: slack.webhook_url
                name: app-interface
          - name: SLACK_CHANNEL
            value: ${SLACK_CHANNEL}
          - name: SLACK_ICON_EMOJI
            value: ${SLACK_ICON_EMOJI}
          command: ["/bin/sh", "-c"]
          args:
          - |
            # generate fluent.conf
            cat > /fluentd/etc/fluent.conf <<EOF
            <source>
              @type tail
              path /fluentd/log/integration.log
              pos_file /fluentd/log/integration.log.pos
              tag integration
              <parse>
                @type none
              </parse>
            </source>

            <filter integration>
              @type grep
              <exclude>
                key message
                pattern /HTTP Error 409: Conflict/
              </exclude>
            </filter>

            <match integration>
              @type slack
              webhook_url ${SLACK_WEBHOOK_URL}
              channel ${SLACK_CHANNEL}
              icon_emoji ${SLACK_ICON_EMOJI}
              username sd-app-sre-bot
              flush_interval 10s
              message "\`\`\`[openshift-resources] %s\`\`\`"
            </match>
            EOF
          volumeMounts:
          - name: fluentd-config
            mountPath: /fluentd/etc/
        containers:
        - name: int
          image: ${IMAGE}:${IMAGE_TAG}
          env:
          - name: DRY_RUN
            value: ${DRY_RUN}
          - name: INTEGRATION_NAME
            value: openshift-resources
          - name: INTEGRATION_EXTRA_ARGS
            value: "--external"
          - name: SLEEP_DURATION_SECS
            value: ${SLEEP_DURATION_SECS}
          - name: LOG_FILE
            value: "${LOG_FILE}"
          resources:
            limits:
              cpu: ${QR_OPENSHIFT_RESOURCES_CPU_LIMIT}
              memory: ${QR_OPENSHIFT_RESOURCES_MEMORY_LIMIT}
            requests:
              cpu: ${QR_OPENSHIFT_RESOURCES_CPU_REQUEST}
              memory: ${QR_OPENSHIFT_RESOURCES_MEMORY_REQUEST}
          volumeMounts:
          - name: qontract-reconcile-toml
            mountPath: /config
          - name: logs
            mountPath: /fluentd/log/
        - name: fluentd
          image: quay.io/app-sre/fluentd:latest
          resources:
            requests:
              memory: 30Mi
              cpu: 15m
            limits:
              memory: 60Mi
              cpu: 25m
          volumeMounts:
          - name: logs
            mountPath: /fluentd/log/
          - name: fluentd-config
            mountPath: /fluentd/etc/
        volumes:
        - name: qontract-reconcile-toml
          secret:
            secretName: qontract-reconcile-toml
        - name: logs
          emptyDir: {}
        - name: fluentd-config
          emptyDir: {}
- apiVersion: extensions/v1beta1
  kind: Deployment
  metadata:
    labels:
      app: qontract-reconcile
    name: qontract-reconcile-terraform-resources
  spec:
    replicas: 1
    selector:
      matchLabels:
        app: qontract-reconcile
    template:
      metadata:
        labels:
          app: qontract-reconcile
      spec:
        securityContext:
          runAsUser: ${{USER_ID}}
        initContainers:
        - name: config
          image: quay.io/app-sre/busybox
          resources:
            requests:
              memory: 10Mi
              cpu: 15m
            limits:
              memory: 20Mi
              cpu: 25m
          env:
          - name: SLACK_WEBHOOK_URL
            valueFrom:
              secretKeyRef:
                key: slack.webhook_url
                name: app-interface
          - name: SLACK_CHANNEL
            value: ${SLACK_CHANNEL}
          - name: SLACK_ICON_EMOJI
            value: ${SLACK_ICON_EMOJI}
          command: ["/bin/sh", "-c"]
          args:
          - |
            # generate fluent.conf
            cat > /fluentd/etc/fluent.conf <<EOF
            <source>
              @type tail
              path /fluentd/log/integration.log
              pos_file /fluentd/log/integration.log.pos
              tag integration
              <parse>
                @type none
              </parse>
            </source>

            <filter integration>
              @type grep
              <exclude>
                key message
                pattern /HTTP Error 409: Conflict/
              </exclude>
            </filter>

            <match integration>
              @type slack
              webhook_url ${SLACK_WEBHOOK_URL}
              channel ${SLACK_CHANNEL}
              icon_emoji ${SLACK_ICON_EMOJI}
              username sd-app-sre-bot
              flush_interval 10s
              message "\`\`\`[terraform-resources] %s\`\`\`"
            </match>
            EOF
          volumeMounts:
          - name: fluentd-config
            mountPath: /fluentd/etc/
        containers:
        - name: int
          image: ${IMAGE}:${IMAGE_TAG}
          env:
          - name: DRY_RUN
            value: ${DRY_RUN}
          - name: INTEGRATION_NAME
            value: terraform-resources
          - name: INTEGRATION_EXTRA_ARGS
            value: "--external --vault-output-path app-sre/integrations-output"
          - name: SLEEP_DURATION_SECS
            value: ${SLEEP_DURATION_SECS}
          - name: LOG_FILE
            value: "${LOG_FILE}"
          resources:
            limits:
              cpu: ${QR_TERRAFORM_RESOURCES_CPU_LIMIT}
              memory: ${QR_TERRAFORM_RESOURCES_MEMORY_LIMIT}
            requests:
              cpu: ${QR_TERRAFORM_RESOURCES_CPU_REQUEST}
              memory: ${QR_TERRAFORM_RESOURCES_MEMORY_REQUEST}
          volumeMounts:
          - name: qontract-reconcile-toml
            mountPath: /config
          - name: logs
            mountPath: /fluentd/log/
        - name: fluentd
          image: quay.io/app-sre/fluentd:latest
          resources:
            requests:
              memory: 30Mi
              cpu: 15m
            limits:
              memory: 60Mi
              cpu: 25m
          volumeMounts:
          - name: logs
            mountPath: /fluentd/log/
          - name: fluentd-config
            mountPath: /fluentd/etc/
        volumes:
        - name: qontract-reconcile-toml
          secret:
            secretName: qontract-reconcile-toml
        - name: logs
          emptyDir: {}
        - name: fluentd-config
          emptyDir: {}
- apiVersion: extensions/v1beta1
  kind: Deployment
  metadata:
    labels:
      app: qontract-reconcile
    name: qontract-reconcile-terraform-users
  spec:
    replicas: 1
    selector:
      matchLabels:
        app: qontract-reconcile
    template:
      metadata:
        labels:
          app: qontract-reconcile
      spec:
        securityContext:
          runAsUser: ${{USER_ID}}
        initContainers:
        - name: config
          image: quay.io/app-sre/busybox
          resources:
            requests:
              memory: 10Mi
              cpu: 15m
            limits:
              memory: 20Mi
              cpu: 25m
          env:
          - name: SLACK_WEBHOOK_URL
            valueFrom:
              secretKeyRef:
                key: slack.webhook_url
                name: app-interface
          - name: SLACK_CHANNEL
            value: ${SLACK_CHANNEL}
          - name: SLACK_ICON_EMOJI
            value: ${SLACK_ICON_EMOJI}
          command: ["/bin/sh", "-c"]
          args:
          - |
            # generate fluent.conf
            cat > /fluentd/etc/fluent.conf <<EOF
            <source>
              @type tail
              path /fluentd/log/integration.log
              pos_file /fluentd/log/integration.log.pos
              tag integration
              <parse>
                @type none
              </parse>
            </source>

            <filter integration>
              @type grep
              <exclude>
                key message
                pattern /HTTP Error 409: Conflict/
              </exclude>
            </filter>

            <match integration>
              @type slack
              webhook_url ${SLACK_WEBHOOK_URL}
              channel ${SLACK_CHANNEL}
              icon_emoji ${SLACK_ICON_EMOJI}
              username sd-app-sre-bot
              flush_interval 10s
              message "\`\`\`[terraform-users] %s\`\`\`"
            </match>
            EOF
          volumeMounts:
          - name: fluentd-config
            mountPath: /fluentd/etc/
        containers:
        - name: int
          image: ${IMAGE}:${IMAGE_TAG}
          env:
          - name: DRY_RUN
            value: ${DRY_RUN}
          - name: INTEGRATION_NAME
            value: terraform-users
          - name: INTEGRATION_EXTRA_ARGS
            value: "--io-dir /tmp/throughput/"
          - name: SLEEP_DURATION_SECS
            value: ${SLEEP_DURATION_SECS}
          - name: LOG_FILE
            value: "${LOG_FILE}"
          resources:
            limits:
              cpu: ${QR_TERRAFORM_USERS_CPU_LIMIT}
              memory: ${QR_TERRAFORM_USERS_MEMORY_LIMIT}
            requests:
              cpu: ${QR_TERRAFORM_USERS_CPU_REQUEST}
              memory: ${QR_TERRAFORM_USERS_MEMORY_REQUEST}
          volumeMounts:
          - name: qontract-reconcile-toml
            mountPath: /config
          - name: logs
            mountPath: /fluentd/log/
        - name: fluentd
          image: quay.io/app-sre/fluentd:latest
          resources:
            requests:
              memory: 30Mi
              cpu: 15m
            limits:
              memory: 60Mi
              cpu: 25m
          volumeMounts:
          - name: logs
            mountPath: /fluentd/log/
          - name: fluentd-config
            mountPath: /fluentd/etc/
        volumes:
        - name: qontract-reconcile-toml
          secret:
            secretName: qontract-reconcile-toml
        - name: logs
          emptyDir: {}
        - name: fluentd-config
          emptyDir: {}
- apiVersion: extensions/v1beta1
  kind: Deployment
  metadata:
    labels:
      app: qontract-reconcile
    name: qontract-reconcile-ocm-groups
  spec:
    replicas: 1
    selector:
      matchLabels:
        app: qontract-reconcile
    template:
      metadata:
        labels:
          app: qontract-reconcile
      spec:
        securityContext:
          runAsUser: ${{USER_ID}}
        containers:
        - name: int
          image: ${IMAGE}:${IMAGE_TAG}
          env:
          - name: DRY_RUN
            value: ${DRY_RUN}
          - name: INTEGRATION_NAME
            value: ocm-groups
          - name: INTEGRATION_EXTRA_ARGS
            value: ""
          - name: SLEEP_DURATION_SECS
            value: ${SLEEP_DURATION_SECS}
          resources:
            limits:
              cpu: ${QR_OCM_GROUPS_CPU_LIMIT}
              memory: ${QR_OCM_GROUPS_MEMORY_LIMIT}
            requests:
              cpu: ${QR_OCM_GROUPS_CPU_REQUEST}
              memory: ${QR_OCM_GROUPS_MEMORY_REQUEST}
          volumeMounts:
          - name: qontract-reconcile-toml
            mountPath: /config
        volumes:
        - name: qontract-reconcile-toml
          secret:
            secretName: qontract-reconcile-toml
- apiVersion: extensions/v1beta1
  kind: Deployment
  metadata:
    labels:
      app: qontract-reconcile
    name: qontract-reconcile-ocm-clusters
  spec:
    replicas: 1
    selector:
      matchLabels:
        app: qontract-reconcile
    template:
      metadata:
        labels:
          app: qontract-reconcile
      spec:
        securityContext:
          runAsUser: ${{USER_ID}}
        containers:
        - name: int
          image: ${IMAGE}:${IMAGE_TAG}
          env:
          - name: DRY_RUN
            value: ${DRY_RUN}
          - name: INTEGRATION_NAME
            value: ocm-clusters
          - name: INTEGRATION_EXTRA_ARGS
            value: ""
          - name: SLEEP_DURATION_SECS
            value: ${SLEEP_DURATION_SECS}
          resources:
            limits:
              cpu: ${QR_OCM_GROUPS_CPU_LIMIT}
              memory: ${QR_OCM_GROUPS_MEMORY_LIMIT}
            requests:
              cpu: ${QR_OCM_GROUPS_CPU_REQUEST}
              memory: ${QR_OCM_GROUPS_MEMORY_REQUEST}
          volumeMounts:
          - name: qontract-reconcile-toml
            mountPath: /config
        volumes:
        - name: qontract-reconcile-toml
          secret:
            secretName: qontract-reconcile-toml
- apiVersion: extensions/v1beta1
  kind: Deployment
  metadata:
    labels:
      app: qontract-reconcile
    name: qontract-reconcile-email-sender
  spec:
    replicas: 1
    selector:
      matchLabels:
        app: qontract-reconcile
    template:
      metadata:
        labels:
          app: qontract-reconcile
      spec:
        securityContext:
          runAsUser: ${{USER_ID}}
        initContainers:
        - name: config
          image: quay.io/app-sre/busybox
          resources:
            requests:
              memory: 10Mi
              cpu: 15m
            limits:
              memory: 20Mi
              cpu: 25m
          env:
          - name: SLACK_WEBHOOK_URL
            valueFrom:
              secretKeyRef:
                key: slack.webhook_url
                name: app-interface
          - name: SLACK_CHANNEL
            value: ${SLACK_CHANNEL}
          - name: SLACK_ICON_EMOJI
            value: ${SLACK_ICON_EMOJI}
          command: ["/bin/sh", "-c"]
          args:
          - |
            # generate fluent.conf
            cat > /fluentd/etc/fluent.conf <<EOF
            <source>
              @type tail
              path /fluentd/log/integration.log
              pos_file /fluentd/log/integration.log.pos
              tag integration
              <parse>
                @type none
              </parse>
            </source>

            <filter integration>
              @type grep
              <exclude>
                key message
                pattern /HTTP Error 409: Conflict/
              </exclude>
            </filter>

            <match integration>
              @type slack
              webhook_url ${SLACK_WEBHOOK_URL}
              channel ${SLACK_CHANNEL}
              icon_emoji ${SLACK_ICON_EMOJI}
              username sd-app-sre-bot
              flush_interval 10s
              message "\`\`\`[email-sender] %s\`\`\`"
            </match>
            EOF
          volumeMounts:
          - name: fluentd-config
            mountPath: /fluentd/etc/
        containers:
        - name: int
          image: ${IMAGE}:${IMAGE_TAG}
          env:
          - name: DRY_RUN
            value: ${DRY_RUN}
          - name: INTEGRATION_NAME
            value: email-sender
          - name: INTEGRATION_EXTRA_ARGS
            value: ""
          - name: SLEEP_DURATION_SECS
            value: ${SLEEP_DURATION_SECS}
          - name: LOG_FILE
            value: "${LOG_FILE}"
          - name: APP_INTERFACE_STATE_BUCKET
            valueFrom:
              secretKeyRef:
                name: app-interface
                key: aws.s3.bucket
          - name: APP_INTERFACE_STATE_BUCKET_ACCOUNT
            value: "${APP_INTERFACE_STATE_BUCKET_ACCOUNT}"
          resources:
            limits:
              cpu: ${QR_EMAIL_SENDER_CPU_LIMIT}
              memory: ${QR_EMAIL_SENDER_MEMORY_LIMIT}
            requests:
              cpu: ${QR_EMAIL_SENDER_CPU_REQUEST}
              memory: ${QR_EMAIL_SENDER_MEMORY_REQUEST}
          volumeMounts:
          - name: qontract-reconcile-toml
            mountPath: /config
          - name: logs
            mountPath: /fluentd/log/
        - name: fluentd
          image: quay.io/app-sre/fluentd:latest
          resources:
            requests:
              memory: 30Mi
              cpu: 15m
            limits:
              memory: 60Mi
              cpu: 25m
          volumeMounts:
          - name: logs
            mountPath: /fluentd/log/
          - name: fluentd-config
            mountPath: /fluentd/etc/
        volumes:
        - name: qontract-reconcile-toml
          secret:
            secretName: qontract-reconcile-toml
        - name: logs
          emptyDir: {}
        - name: fluentd-config
          emptyDir: {}
- apiVersion: extensions/v1beta1
  kind: Deployment
  metadata:
    labels:
      app: qontract-reconcile
    name: qontract-reconcile-sentry-config
  spec:
    replicas: 1
    selector:
      matchLabels:
        app: qontract-reconcile
    template:
      metadata:
        labels:
          app: qontract-reconcile
      spec:
        securityContext:
          runAsUser: ${{USER_ID}}
        initContainers:
        - name: config
          image: busybox
          resources:
            requests:
              memory: 10Mi
              cpu: 15m
            limits:
              memory: 20Mi
              cpu: 25m
          env:
          - name: SLACK_WEBHOOK_URL
            valueFrom:
              secretKeyRef:
                key: slack.webhook_url
                name: app-interface
          - name: SLACK_CHANNEL
            value: ${SLACK_CHANNEL}
          - name: SLACK_ICON_EMOJI
            value: ${SLACK_ICON_EMOJI}
          command: ["/bin/sh", "-c"]
          args:
          - |
            # generate fluent.conf
            cat > /fluentd/etc/fluent.conf <<EOF
            <source>
              @type tail
              path /fluentd/log/integration.log
              pos_file /fluentd/log/integration.log.pos
              tag integration
              <parse>
                @type none
              </parse>
            </source>

            <filter integration>
              @type grep
              <exclude>
                key message
                pattern /HTTP Error 409: Conflict/
              </exclude>
            </filter>

            <match integration>
              @type slack
              webhook_url ${SLACK_WEBHOOK_URL}
              channel ${SLACK_CHANNEL}
              icon_emoji ${SLACK_ICON_EMOJI}
              username sd-app-sre-bot
              flush_interval 10s
              message "\`\`\`[sentry-config] %s\`\`\`"
            </match>
            EOF
          volumeMounts:
          - name: fluentd-config
            mountPath: /fluentd/etc/
        containers:
        - name: int
          image: ${IMAGE}:${IMAGE_TAG}
          env:
          - name: DRY_RUN
            value: ${DRY_RUN}
          - name: INTEGRATION_NAME
            value: sentry-config
          - name: INTEGRATION_EXTRA_ARGS
            value: ""
          - name: SLEEP_DURATION_SECS
            value: ${SLEEP_DURATION_SECS}
          - name: LOG_FILE
            value: "${LOG_FILE}"
          resources:
            limits:
              cpu: ${QR_SENTRY_CONFIG_CPU_LIMIT}
              memory: ${QR_SENTRY_CONFIG_MEMORY_LIMIT}
            requests:
              cpu: ${QR_SENTRY_CONFIG_CPU_REQUEST}
              memory: ${QR_SENTRY_CONFIG_MEMORY_REQUEST}
          volumeMounts:
          - name: qontract-reconcile-toml
            mountPath: /config
          - name: logs
            mountPath: /fluentd/log/
        - name: fluentd
          image: quay.io/app-sre/fluentd:latest
          resources:
            requests:
              memory: 30Mi
              cpu: 15m
            limits:
              memory: 60Mi
              cpu: 25m
          volumeMounts:
          - name: logs
            mountPath: /fluentd/log/
          - name: fluentd-config
            mountPath: /fluentd/etc/
        volumes:
        - name: qontract-reconcile-toml
          secret:
            secretName: qontract-reconcile-toml
        - name: logs
          emptyDir: {}
        - name: fluentd-config
          emptyDir: {}
parameters:
- name: IMAGE
  value: quay.io/app-sre/qontract-reconcile
- name: IMAGE_TAG
  value: latest
- name: DRY_RUN
  value: --dry-run
- name: SLEEP_DURATION_SECS
  value: "300"
- name: APP_INTERFACE_SQS_SECRET_NAME
  value: app-interface-sqs
- name: APP_INTERFACE_STATE_BUCKET_ACCOUNT
  value: app-sre
- name: USER_ID
  value: "1000720000"
- name: LOG_FILE
  value: "/fluentd/log/integration.log"
- name: SLACK_CHANNEL
  value: "sd-app-sre-reconcile-stage"
- name: SLACK_ICON_EMOJI
  value: ":bust_in_silhouette:"
# Resource limits
- name: QR_AWS_GARBAGE_COLLECTOR_CPU_LIMIT
  value: 50m
- name: QR_AWS_GARBAGE_COLLECTOR_MEMORY_LIMIT
  value: 400Mi
- name: QR_AWS_GARBAGE_COLLECTOR_CPU_REQUEST
  value: 25m
- name: QR_AWS_GARBAGE_COLLECTOR_MEMORY_REQUEST
  value: 200Mi
- name: QR_AWS_IAM_KEYS_CPU_LIMIT
  value: 25m
- name: QR_AWS_IAM_KEYS_MEMORY_LIMIT
  value: 200Mi
- name: QR_AWS_IAM_KEYS_CPU_REQUEST
  value: 15m
- name: QR_AWS_IAM_KEYS_MEMORY_REQUEST
  value: 100Mi
- name: QR_AWS_SUPPORT_CASE_SOS_CPU_LIMIT
  value: 50m
- name: QR_AWS_SUPPORT_CASE_SOS_MEMORY_LIMIT
  value: 200Mi
- name: QR_AWS_SUPPORT_CASE_SOS_CPU_REQUEST
  value: 25m
- name: QR_AWS_SUPPORT_CASE_SOS_MEMORY_REQUEST
  value: 100Mi
- name: QR_EMAIL_SENDER_CPU_LIMIT
  value: 50m
- name: QR_EMAIL_SENDER_MEMORY_LIMIT
  value: 200Mi
- name: QR_EMAIL_SENDER_CPU_REQUEST
  value: 25m
- name: QR_EMAIL_SENDER_MEMORY_REQUEST
  value: 100Mi
- name: QR_GITHUB_CPU_LIMIT
  value: 25m
- name: QR_GITHUB_MEMORY_LIMIT
  value: 80Mi
- name: QR_GITHUB_CPU_REQUEST
  value: 15m
- name: QR_GITHUB_MEMORY_REQUEST
  value: 50Mi
- name: QR_GITHUB_REPO_INVITES_CPU_LIMIT
  value: 25m
- name: QR_GITHUB_REPO_INVITES_MEMORY_LIMIT
  value: 150Mi
- name: QR_GITHUB_REPO_INVITES_CPU_REQUEST
  value: 15m
- name: QR_GITHUB_REPO_INVITES_MEMORY_REQUEST
  value: 50Mi
- name: QR_GITHUB_SCANNER_CPU_LIMIT
  value: 400m
- name: QR_GITHUB_SCANNER_MEMORY_LIMIT
  value: 1000Mi
- name: QR_GITHUB_SCANNER_CPU_REQUEST
  value: 200m
- name: QR_GITHUB_SCANNER_MEMORY_REQUEST
  value: 500Mi
- name: QR_OCM_CLUSTERS_CPU_LIMIT
  value: 25m
- name: QR_OCM_CLUSTERS_MEMORY_LIMIT
  value: 200Mi
- name: QR_OCM_CLUSTERS_CPU_REQUEST
  value: 15m
- name: QR_OCM_CLUSTERS_MEMORY_REQUEST
  value: 100Mi
- name: QR_OCM_GROUPS_CPU_LIMIT
  value: 25m
- name: QR_OCM_GROUPS_MEMORY_LIMIT
  value: 200Mi
- name: QR_OCM_GROUPS_CPU_REQUEST
  value: 15m
- name: QR_OCM_GROUPS_MEMORY_REQUEST
  value: 100Mi
- name: QR_OPENSHIFT_ACME_CPU_LIMIT
  value: 200m
- name: QR_OPENSHIFT_ACME_MEMORY_LIMIT
  value: 400Mi
- name: QR_OPENSHIFT_ACME_CPU_REQUEST
  value: 100m
- name: QR_OPENSHIFT_ACME_MEMORY_REQUEST
  value: 300Mi
- name: QR_OPENSHIFT_CLUSTERROLEBINDINGS_CPU_LIMIT
  value: 150m
- name: QR_OPENSHIFT_CLUSTERROLEBINDINGS_MEMORY_LIMIT
  value: 300Mi
- name: QR_OPENSHIFT_CLUSTERROLEBINDINGS_CPU_REQUEST
  value: 100m
- name: QR_OPENSHIFT_CLUSTERROLEBINDINGS_MEMORY_REQUEST
  value: 200Mi
- name: QR_OPENSHIFT_GROUPS_CPU_LIMIT
  value: 150m
- name: QR_OPENSHIFT_GROUPS_MEMORY_LIMIT
  value: 300Mi
- name: QR_OPENSHIFT_GROUPS_CPU_REQUEST
  value: 100m
- name: QR_OPENSHIFT_GROUPS_MEMORY_REQUEST
  value: 200Mi
- name: QR_OPENSHIFT_LIMITRANGES_CPU_LIMIT
  value: 150m
- name: QR_OPENSHIFT_LIMITRANGES_MEMORY_LIMIT
  value: 100Mi
- name: QR_OPENSHIFT_LIMITRANGES_CPU_REQUEST
  value: 100m
- name: QR_OPENSHIFT_LIMITRANGES_MEMORY_REQUEST
  value: 50Mi
- name: QR_OPENSHIFT_NAMESPACES_CPU_LIMIT
  value: 200m
- name: QR_OPENSHIFT_NAMESPACES_MEMORY_LIMIT
  value: 400Mi
- name: QR_OPENSHIFT_NAMESPACES_CPU_REQUEST
  value: 100m
- name: QR_OPENSHIFT_NAMESPACES_MEMORY_REQUEST
  value: 300Mi
- name: QR_OPENSHIFT_NETWORK_POLICIES_CPU_LIMIT
  value: 200m
- name: QR_OPENSHIFT_NETWORK_POLICIES_MEMORY_LIMIT
  value: 400Mi
- name: QR_OPENSHIFT_NETWORK_POLICIES_CPU_REQUEST
  value: 100m
- name: QR_OPENSHIFT_NETWORK_POLICIES_MEMORY_REQUEST
  value: 200Mi
- name: QR_OPENSHIFT_ROLEBINDINGS_CPU_LIMIT
  value: 300m
- name: QR_OPENSHIFT_ROLEBINDINGS_MEMORY_LIMIT
  value: 400Mi
- name: QR_OPENSHIFT_ROLEBINDINGS_CPU_REQUEST
  value: 200m
- name: QR_OPENSHIFT_ROLEBINDINGS_MEMORY_REQUEST
  value: 200Mi
- name: QR_OPENSHIFT_RESOURCES_CPU_LIMIT
  value: 1000m
- name: QR_OPENSHIFT_RESOURCES_MEMORY_LIMIT
  value: 800Mi
- name: QR_OPENSHIFT_RESOURCES_CPU_REQUEST
  value: 600m
- name: QR_OPENSHIFT_RESOURCES_MEMORY_REQUEST
  value: 500Mi
- name: QR_OPENSHIFT_USERS_CPU_LIMIT
  value: 40m
- name: QR_OPENSHIFT_USERS_MEMORY_LIMIT
  value: 300Mi
- name: QR_OPENSHIFT_USERS_CPU_REQUEST
  value: 20m
- name: QR_OPENSHIFT_USERS_MEMORY_REQUEST
  value: 200Mi
- name: QR_QUAY_MEMBERSHIP_CPU_LIMIT
  value: 25m
- name: QR_QUAY_MEMBERSHIP_MEMORY_LIMIT
  value: 150Mi
- name: QR_QUAY_MEMBERSHIP_CPU_REQUEST
  value: 15m
- name: QR_QUAY_MEMBERSHIP_MEMORY_REQUEST
  value: 50Mi
- name: QR_QUAY_MIRROR_CPU_LIMIT
  value: 25m
- name: QR_QUAY_MIRROR_MEMORY_LIMIT
  value: 200Mi
- name: QR_QUAY_MIRROR_CPU_REQUEST
  value: 15m
- name: QR_QUAY_MIRROR_MEMORY_REQUEST
  value: 150Mi
- name: QR_QUAY_REPOS_CPU_LIMIT
  value: 25m
- name: QR_QUAY_REPOS_MEMORY_LIMIT
  value: 150Mi
- name: QR_QUAY_REPOS_CPU_REQUEST
  value: 15m
- name: QR_QUAY_REPOS_MEMORY_REQUEST
  value: 50Mi
- name: QR_SENTRY_CONFIG_CPU_LIMIT
  value: 25m
- name: QR_SENTRY_CONFIG_MEMORY_LIMIT
  value: 200Mi
- name: QR_SENTRY_CONFIG_CPU_REQUEST
  value: 15m
- name: QR_SENTRY_CONFIG_MEMORY_REQUEST
  value: 100Mi
- name: QR_TERRAFORM_RESOURCES_CPU_LIMIT
  value: 400m
- name: QR_TERRAFORM_RESOURCES_MEMORY_LIMIT
  value: 1000Mi
- name: QR_TERRAFORM_RESOURCES_CPU_REQUEST
  value: 200m
- name: QR_TERRAFORM_RESOURCES_MEMORY_REQUEST
  value: 800Mi
- name: QR_TERRAFORM_USERS_CPU_LIMIT
  value: 400m
- name: QR_TERRAFORM_USERS_MEMORY_LIMIT
  value: 1500Mi
- name: QR_TERRAFORM_USERS_CPU_REQUEST
  value: 200m
- name: QR_TERRAFORM_USERS_MEMORY_REQUEST
  value: 1000Mi
