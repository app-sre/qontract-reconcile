[tool.ruff]
line-length = 88
target-version = 'py311'
required-version = "0.1.7"

src = ["reconcile", "tools", "release", "dockerfiles/hack", "setup.py"]
extend-exclude = ["reconcile/gql_definitions"]
fix = true

[tool.ruff.lint]
preview = true

# defaults are ["E4", "E7", "E9", "F"]
extend-select = [
    # flake8 default rules
    "E1", # preview rule
    "E2", # preview rule
    "W",
    # isort
    "I",
    # pylint
    "PL",

]
ignore = [
    "PLC0415", # `import` should be at the top-level of a file
    "PLC1901", # ... can be simplified to `...` as an empty string is falsey
    "PLR0904", # Too many public methods
    "PLR0911", # Too many return statements
    "PLR0912", # Too many branches
    "PLR0913", # Too many arguments
    "PLR0915", # Too many statements
    "PLR0917", # Too many positional arguments
    "PLR1704", # Redefining argument with the local name
    "PLR2004", # Magic value used in comparison
    "PLR5501", # Use `elif` instead of `else` then `if`, to reduce indentation
    "PLR6201", # Use a `set` literal when testing for membership
    "PLR6301", # Method XXX could be a function, class method, or static method
    "PLW0602", # Using global for %r but no assigment is done
    "PLW0603", # global-statement
    "PLW1510", # `subprocess.run` without explicit `check` argument
    "PLW1514", # `open` in text mode without explicit `encoding` argument
    "PLW1641", # Object does not implement `__hash__` method
    "PLW2901", # `for` loop variable `v` overwritten by assignment target
    "PLW3201", # Bad or misspelled dunder method name
]
[tool.ruff.format]
preview = true

[tool.ruff.lint.isort]
known-first-party = ["reconcile", "tools"]
